---
import BaseLayout from "../layouts/BaseLayout.astro";
import settings from "../data/settings.json";
import { getEntry } from "astro:content";

const contactPage = await getEntry("pages", "contact");
if (!contactPage) {
    throw new Error("Could not find 'contact' page content");
}
const { data } = contactPage;
---

<BaseLayout title={data.title || "Contact | amii"}>
    <section
        class="section container"
        style="max-width: 800px; text-align: center;"
    >
        <h1
            class="font-heading"
            style="font-size: 2.5rem; margin-bottom: 2rem;"
        >
            {data.heading || "Contact"}
        </h1>

        <div class="grid cols-2" style="margin-bottom: 4rem;">
            <div
                style="padding: 1.5rem; border: 1px solid currentColor; border-radius: 8px;"
            >
                <h2
                    class="font-heading"
                    style="font-size: 1.25rem; margin-bottom: 0.5rem;"
                >
                    {data.bookingsTitle || "Bookings"}
                </h2>
                <a
                    href={`mailto:${settings.bookingsEmail}`}
                    style="font-size: 1.1rem; text-decoration: underline;"
                    >{settings.bookingsEmail}</a
                >
            </div>

            <div
                style="padding: 1.5rem; border: 1px solid currentColor; border-radius: 8px;"
            >
                <h2
                    class="font-heading"
                    style="font-size: 1.25rem; margin-bottom: 0.5rem;"
                >
                    {data.partnershipsTitle || "Partnerships"}
                </h2>
                <a
                    href={`mailto:${settings.partnerEmail}`}
                    style="font-size: 1.1rem; text-decoration: underline;"
                    >{settings.partnerEmail}</a
                >
            </div>
        </div>

        <div class="text-left">
            <h2
                class="font-heading text-center"
                style="font-size: 1.5rem; margin-bottom: 1.5rem;"
            >
                {data.fanMailTitle || "Fan Mail & Messages"}
            </h2>
            <form
                name="fanmail"
                method="POST"
                action="/thank-you"
                data-netlify="true"
                style="display: flex; flex-direction: column; gap: 1rem;"
            >
                <div>
                    <label
                        style="display: block; font-size: 0.8rem; text-transform: uppercase; margin-bottom: 0.25rem;"
                        >{data.formNameLabel || "Name"}</label
                    >
                    <input type="text" name="name" required />
                </div>
                <div>
                    <label
                        style="display: block; font-size: 0.8rem; text-transform: uppercase; margin-bottom: 0.25rem;"
                        >{data.formEmailLabel || "Email"}</label
                    >
                    <input type="email" name="email" />
                </div>
                <div>
                    <label
                        style="display: block; font-size: 0.8rem; text-transform: uppercase; margin-bottom: 0.25rem;"
                    >
                        {data.formMessageLabel || "Message"}
                    </label>
                    <textarea
                        name="message"
                        rows="5"
                        style="width: 100%; padding: 0.5rem; background: transparent; border: 1px solid currentColor; border-radius: 4px;"
                        required></textarea>
                </div>
                <button type="submit" class="btn w-full"
                    >{data.formButtonText || "Send Message"}</button
                >
            </form>
        </div>
    </section>
</BaseLayout>
