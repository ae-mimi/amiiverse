---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import NewsletterForm from "../components/NewsletterForm.astro";
import settings from "../data/settings.json";
import { getEntry } from "astro:content";

const homePage = await getEntry("pages", "home");
if (!homePage) {
  throw new Error("Could not find 'home' page content");
}
const { data } = homePage;
---

<BaseLayout title={data.title || "amii | Official Website"}>
  <Hero
    type={data.heroType as any}
    image={data.heroImage}
    video={data.heroVideo}
    title={data.heroTitle}
    subtitle={data.heroSubtitle}
    link={data.heroLink}
    linkText={data.heroLinkText}
    badgeText={data.comingSoonText}
  />

  <section
    id="join"
    class="section text-center container"
    style="max-width: 600px;"
  >
    <div style="margin-bottom: 2rem;">
      <p
        class="font-heading"
        style="font-size: 1.5rem; opacity: 1; margin-bottom: 1.5rem;"
      >
        {
          data.comingSoonText ||
            "Our debut release is coming soon. Weâ€™re sharing updates here first."
        }
      </p>
    </div>

    {
      /* 
         TODO: USER needs to provide the real Brevo Action URL here.
         Example: https://sibforms.com/serve/MUIE... 
         For now, we render the styled form. 
      */
    }
    <div style="margin-top: 2rem;">
      <NewsletterForm
        action={settings.mailingListEmbed || "#"}
        namePlaceholder={data.newsletterNamePlaceholder}
        emailPlaceholder={data.newsletterEmailPlaceholder}
      />
    </div>
  </section>
</BaseLayout>
