---
interface Props {
  type?: 'cover' | 'group' | 'video' | 'full';
  title?: string;
  subtitle?: string;
  link?: string;
  linkText?: string;
  image?: string;
  video?: string;
  badgeText?: string;
}

const { 
  type = 'cover', 
  title = 'amii', 
  subtitle, 
  link = '/join', 
  linkText = 'Join the journey',
  image = '/placeholder-hero.jpg',
  video = '/uploads/hero-loop.mp4',
  badgeText = 'Coming Soon'
} = Astro.props;
  // Ensure image path is absolute if it's from uploads
  const safeImage = image.startsWith('http') || image.startsWith('/') ? image : `/${image}`;
---

<section class="hero-section">
  {type === 'video' && (
    <div class="absolute inset-0 z-10" style="background: rgba(0,0,0,0.2);"></div>
    <video class="absolute inset-0 w-full h-full object-cover -z-10" style="width:100%; height:100%; object-fit: cover; position:absolute; z-index:-1;" autoplay loop muted playsinline>
      <source src={video} type="video/mp4" />
    </video>
  )}

  {(type === 'group' || type === 'cover' || type === 'full') && (
     <div class="absolute inset-0 -z-10" style="position:absolute; inset:0; z-index: -1;">
        <img src={safeImage} alt="amii hero" style="width:100%; height:100%; object-fit: cover;" />
        <div style="background: rgba(0,0,0,0.1); position:absolute; inset:0;"></div>
     </div>
  )}
  
  <div class={`hero-content ${type === 'video' ? 'minimal' : ''}`}>
    {type === 'full' && (
      <div class="release-badge" style="display: inline-block; padding: 0.5rem 1rem; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 9999px; margin-bottom: 1rem; border: 1px solid rgba(255, 255, 255, 0.2);">
        <span style="font-size: 0.875rem; letter-spacing: 0.05em; text-transform: uppercase;">{badgeText}</span>
      </div>
    )}

    {type !== 'full' && (
      <h1 class="hero-title font-heading" style={type === 'video' ? 'font-size: 3rem;' : ''}>
        {title}
      </h1>
    )}
    
    {subtitle && type !== 'full' && type !== 'video' && (
      <p class="font-body opacity-80" style="font-size: 1.5rem; margin-bottom: 2rem;">
        {subtitle}
      </p>
    )}
    
    <a href={link} class="btn" data-track-category="Hero" data-track-action="Join CTA">
      {linkText}
    </a>
  </div>
</section>
