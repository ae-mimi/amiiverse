---
import settings from "../data/settings.json";
const links = [
  { label: "Home", href: "/" },
  { label: "Music", href: "/music" },
  { label: "About", href: "/about" },
  { label: "Press", href: "/press" },
  { label: "Contact", href: "/contact" },
  { label: "Shop", href: "/shop" },
];
---

<header class="container header">
  <a
    href="/"
    class="logo font-heading uppercase"
    style="font-size: 1.5rem; letter-spacing: 0.1em; font-weight: bold; display: flex; align-items: center;"
  >
    {
      settings.logo ? (
        <img
          src={settings.logo}
          alt={settings.siteTitle || "amii"}
          style="height: 40px; width: auto;"
        />
      ) : (
        "amii"
      )
    }
  </a>

  <nav>
    <ul class="nav-list">
      {
        links.map((link) => (
          <li>
            <a href={link.href} class="nav-link font-body">
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </nav>

  <div class="flex items-center gap-sm hidden-mobile">
    <a href="/links" class="btn" style="padding: 0.3em 1em; font-size: 0.8rem;"
      >Follow</a
    >

    <button
      id="theme-toggle"
      class="p-2"
      aria-label="Toggle Dark Mode"
      style="background:none; border:none; padding: 0.5rem; cursor: pointer; color: inherit;"
    >
      <!-- Sun Icon -->
      <svg
        class="icon hidden-mobile-theme"
        style="width: 20px; height: 20px; display: var(--icon-sun-display, block);"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        ></path></svg
      >
      <!-- Moon Icon -->
      <svg
        class="icon"
        style="width: 20px; height: 20px; display: var(--icon-moon-display, none);"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        ></path></svg
      >
    </button>
  </div>

  <style>
    [data-theme="dark"] {
      --icon-sun-display: none;
      --icon-moon-display: block;
    }
  </style>
</header>

<script is:inline>
  const themeToggle = document.getElementById("theme-toggle");

  // Check initial state
  const getTheme = () =>
    localStorage.getItem("theme") ||
    (window.matchMedia("(prefers-color-scheme: dark)").matches
      ? "dark"
      : "light");

  const setTheme = (theme) => {
    document.documentElement.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
  };

  // Set initial
  setTheme(getTheme());

  themeToggle?.addEventListener("click", () => {
    const currentTheme = getTheme();
    const newTheme = currentTheme === "light" ? "dark" : "light";
    setTheme(newTheme);
  });
</script>
